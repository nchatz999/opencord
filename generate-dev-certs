#!/usr/bin/env bash
set -euo pipefail
cd "$(dirname "${BASH_SOURCE[0]}")"

CERT_DIR="certs"
mkdir -p "$CERT_DIR"

# Generate a self-signed certificate for localhost
openssl ecparam -genkey -name prime256v1 -out "$CERT_DIR/localhost.key"
openssl req -x509 -sha256 -nodes -days 365 -key "$CERT_DIR/localhost.key" -out "$CERT_DIR/localhost.crt" -config "$CERT_DIR/localhost.conf" -extensions 'v3_req'

echo "Development certificate generated successfully"
echo ""
echo "Add the following to your .env file:"
echo "  CERT_PATH=certs/localhost.crt"
echo "  KEY_PATH=certs/localhost.key"
